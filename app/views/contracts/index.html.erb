
<h1><%= link_to "contracts", contracts_path %></h1>

<table id="contract" class="display">
 <thead> 
 <tr>
	<th>No.</th>
	<th>deposit_rcvd</th>
	<th>expect ship date </th>
	<th>prefoma sales contract date</th>
	<th>summary</th>
	<th>customer</th>
	<th>PM</th>
	<th>products</th>
	<th>projects</th>
	<th>revision</th>
  </tr>
  </thead>
 <tbody>
<% @contracts.each do |contract| %>
  <tr>
  <%= form_for(contract) do |f| %>
    <td><%=  best_in_place contract, :No %></td>
    <td><%= best_in_place contract, :deposit_rcvd, :type => :date %></td>
    <td><%= best_in_place contract,:expected_ship_date, :type => :date %></td>
    <td><%= best_in_place contract,:prefoma_sales_contract, :type => :date %></td>
    <td><%= best_in_place contract,:summary %></td>
    <td><% if ! contract.customer_id.nil?  %>
 <%= Customer.find(contract.customer_id).name %>
      <% else %>
    <%= best_in_place contract,:customer_id %>
      <% end %>
    </td>
    <td><% if ! contract.user_id.nil?  %>
 <%= User.find(contract.user_id).username %>
        <% else %>
    <%= best_in_place contract,:user_id %>
        <% end  %>
     </td>
    <td></td>
    <td></td>
    <td><%= contract.versions.length %>
        <% if user_signed_in?   %>
        <% if (current_user.username == "admin")  %>
          <%= contract.versions %>
        <% end  %>
        <% end %>
    </td>
  <% end %>
  </tr>
<% end %>
 </tbody>
</table>
<%= will_paginate @contracts %>
<br />
<%= link_to "add contract",new_contract_path %>
